# ربات راستی‌آزمایی تلگرام

این پروژه یک ربات پیشرفته تلگرام برای راستی‌آزمایی اخبار و اطلاعات است که با استفاده از هوش مصنوعی، یادگیری ماشین و پردازش زبان طبیعی، صحت اطلاعات را بررسی می‌کند.

## قابلیت‌های اصلی

- تحلیل متن با استفاده از مدل‌های عمیق BERT، RoBERTa و ALBERT
- تبدیل گفتار به متن و تحلیل فایل‌های صوتی
- تحلیل تصاویر و شناسایی دستکاری‌های دیجیتال
- تحلیل ویدیوها و استخراج محتوا
- راستی‌آزمایی با استفاده از Google Fact Check API
- تشخیص منابع معتبر و ارزیابی اعتبار
- پشتیبانی از زبان فارسی و انگلیسی

## پیش‌نیازها

برای اجرای این پروژه، موارد زیر باید روی سیستم شما نصب باشد:

- Python 3.8 یا بالاتر
- PostgreSQL 12 یا بالاتر
- Redis 6 یا بالاتر
- FFmpeg برای پردازش ویدیو
- Tesseract برای OCR
- CUDA (اختیاری، برای استفاده از GPU)

## نصب و راه‌اندازی

1. ابتدا مخزن را کلون کنید:
```bash
git clone https://github.com/yourusername/factchecker-bot.git
cd factchecker-bot
```

2. یک محیط مجازی Python ایجاد و فعال کنید:
```bash
python -m venv venv
source venv/bin/activate  # در لینوکس
venv\Scripts\activate     # در ویندوز
```

3. نصب وابستگی‌ها:
```bash
pip install -r requirements.txt
```

4. دانلود مدل‌های مورد نیاز:
```bash
python scripts/download_models.py
```

5. ایجاد فایل تنظیمات محیطی:
```bash
cp .env.example .env
```

6. فایل `.env` را با اطلاعات خود ویرایش کنید:
```
# تنظیمات تلگرام
TELEGRAM_TOKEN=your_telegram_bot_token
ADMIN_USER_IDS=123456789,987654321

# تنظیمات پایگاه داده
DATABASE_URL=postgresql://username:password@localhost:5432/factchecker

# تنظیمات Redis
REDIS_URL=redis://localhost:6379/0

# کلیدهای API
GOOGLE_FACTCHECK_API_KEY=your_google_api_key

# تنظیمات محیط
ENVIRONMENT=development
DEBUG=True
```

7. ایجاد پایگاه داده:
```bash
createdb factchecker  # در PostgreSQL
alembic upgrade head  # اجرای مایگریشن‌ها
```

8. اجرای برنامه:
```bash
python main.py
```

## ساختار پروژه

```
factchecker-bot/
├── config/                 # تنظیمات برنامه
├── src/                   # کد اصلی
│   ├── bot/              # هندلرهای تلگرام
│   ├── core/             # سرویس‌های اصلی
│   ├── data/             # مدل‌ها و ریپوزیتوری‌ها
│   └── utils/            # توابع کمکی
├── alembic/              # مایگریشن‌های پایگاه داده
├── models/               # مدل‌های یادگیری ماشین
├── tests/                # تست‌ها
└── scripts/              # اسکریپت‌های کمکی
```

## کار با ربات

پس از راه‌اندازی موفق، ربات قابلیت‌های زیر را خواهد داشت:

1. دریافت متن:
   - ارسال مستقیم متن برای راستی‌آزمایی
   - دریافت نتایج تحلیل و درصد اعتبار

2. دریافت تصویر:
   - ارسال تصویر به همراه کپشن
   - تشخیص دستکاری‌های احتمالی
   - استخراج و تحلیل متن

3. دریافت ویدیو:
   - تحلیل محتوای ویدیو
   - استخراج متن و گفتار
   - بررسی اصالت

4. دریافت صوت:
   - تبدیل گفتار به متن
   - تحلیل محتوای متنی
   - راستی‌آزمایی ادعاها

## دستورات ربات

- `/start` - شروع کار با ربات
- `/help` - راهنمای استفاده
- `/settings` - تنظیمات ربات
- `/stats` - آمار راستی‌آزمایی‌ها
- `/lang` - تغییر زبان
- `/about` - درباره ربات

## توسعه و مشارکت

1. ابتدا پروژه را fork کنید.
2. یک شاخه جدید برای ویژگی جدید ایجاد کنید.
3. تغییرات خود را اعمال کنید.
4. تست‌ها را اجرا کنید.
5. یک Pull Request ایجاد کنید.

## تست‌ها

برای اجرای تست‌ها:
```bash
pytest tests/
```

برای اجرای تست‌ها با گزارش پوشش کد:
```bash
pytest --cov=src tests/
```

## پشتیبان‌گیری

برای پشتیبان‌گیری از پایگاه داده:
```bash
scripts/backup_db.sh
```

برای بازیابی پشتیبان:
```bash
scripts/restore_db.sh backup_file.sql
```

## عیب‌یابی

### مشکلات رایج:

1. خطای اتصال به پایگاه داده:
   - بررسی صحت اطلاعات اتصال در فایل .env
   - اطمینان از اجرا بودن PostgreSQL
   - بررسی دسترسی‌های کاربر

2. خطای بارگذاری مدل‌ها:
   - اجرای مجدد اسکریپت download_models.py
   - بررسی فضای دیسک
   - بررسی دسترسی‌های پوشه models/

3. خطای Redis:
   - بررسی اجرا بودن سرویس Redis
   - بررسی تنظیمات اتصال

## امنیت

- همیشه از HTTPS برای API‌ها استفاده کنید
- کلیدهای API را در فایل .env ذخیره کنید
- دسترسی‌های پایگاه داده را محدود کنید
- از رمزنگاری برای داده‌های حساس استفاده کنید

## مجوز

این پروژه تحت مجوز MIT منتشر شده است.